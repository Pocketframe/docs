"use strict";(self.webpackChunkpocketframe_docs=self.webpackChunkpocketframe_docs||[]).push([[9803],{6833:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>r,contentTitle:()=>l,default:()=>c,frontMatter:()=>t,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"getting-deeper/session","title":"Session","description":"Introduction","source":"@site/docs/getting-deeper/session.md","sourceDirName":"getting-deeper","slug":"/getting-deeper/session","permalink":"/docs/docs/getting-deeper/session","draft":false,"unlisted":false,"editUrl":"https://github.com/pocketframe/docs/tree/main/docs/getting-deeper/session.md","tags":[],"version":"current","sidebarPosition":16,"frontMatter":{"sidebar_position":16},"sidebar":"tutorialSidebar","previous":{"title":"Validation","permalink":"/docs/docs/essentials/validation"},"next":{"title":"helper-functions","permalink":"/docs/docs/helper-functions"}}');var a=n(4848),o=n(8453);const t={sidebar_position:16},l="Session",r={},h=[{value:"Introduction",id:"introduction",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Driver requirements",id:"driver-requirements",level:2},{value:"Database",id:"database",level:3},{value:"Cookie",id:"cookie",level:3},{value:"File",id:"file",level:3},{value:"Working with sessions",id:"working-with-sessions",level:2},{value:"Starting the session",id:"starting-the-session",level:4},{value:"Checking if the session is started",id:"checking-if-the-session-is-started",level:4},{value:"Getting session ID",id:"getting-session-id",level:4},{value:"Get all session data",id:"get-all-session-data",level:4},{value:"Session Exists",id:"session-exists",level:4},{value:"Session has key",id:"session-has-key",level:4},{value:"Session get",id:"session-get",level:4},{value:"Session put",id:"session-put",level:4},{value:"Session Put All",id:"session-put-all",level:4},{value:"Session Remove",id:"session-remove",level:4},{value:"Session flush",id:"session-flush",level:4},{value:"Session destroy",id:"session-destroy",level:4},{value:"Session flash",id:"session-flash",level:4},{value:"Session hasFlash",id:"session-hasflash",level:4},{value:"Session getFlash",id:"session-getflash",level:4},{value:"Session old",id:"session-old",level:4},{value:"Session Expire",id:"session-expire",level:4},{value:"Session sweep",id:"session-sweep",level:4}];function d(e){const s={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.header,{children:(0,a.jsx)(s.h1,{id:"session",children:"Session"})}),"\n",(0,a.jsx)(s.h2,{id:"introduction",children:"Introduction"}),"\n",(0,a.jsx)(s.p,{children:"Web applications are HTTP driven, which means they are stateless, or in other words, each request is independent of the previous one. Pocketframe provides a simple and easy-to-use session management system that allows you to store and retrieve data between requests. By default this supports database, cookies and file based sessions storage. We will add support for Redis and other session stores in the future."}),"\n",(0,a.jsx)(s.h2,{id:"configuration",children:"Configuration"}),"\n",(0,a.jsxs)(s.p,{children:["The session configuration is stored in ",(0,a.jsx)(s.code,{children:"config/session.php"}),". This file contains the configuration for the session system. You can modify the configuration to change the session driver, session lifetime, and other settings."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",children:"<?php\n\nreturn [\n\n    /**\n     * The session driver.\n     *\n     * @var string\n     *\n     */\n    'driver' => 'database', // Available: database, cookie, file\n\n\n    /**\n     * The session lifetime in minutes.\n     *\n     * @var int\n     *\n     */\n    'lifetime' => 120,\n\n\n    /**\n     * The session files directory.\n     *\n     * @var string\n     *\n     */\n    'files' => storage_path('framework/sessions'),\n\n\n    /**\n     * The session cookie name.\n     *\n     * @var string\n     *\n     */\n    'cookie' => 'pocketframe_session',\n\n\n    /**\n     * The session cookie path.\n     *\n     * @var string\n     *\n     */\n    'path' => '/',\n\n\n    /**\n     * The session cookie domain.\n     *\n     * @var string\n     *\n     */\n    'domain' => null,\n\n\n    /**\n     * The session cookie secure flag.\n     *\n     * @var bool\n     *\n     */\n    'secure' => false,\n\n\n    /**\n     * The session cookie httpOnly flag.\n     *\n     * @var bool\n     *\n     */\n    'httpOnly' => true,\n\n\n    /**\n     * The session cookie sameSite flag.\n     *\n     * @var string\n     *\n     */\n    'sameSite' => 'lax',\n];\n"})}),"\n",(0,a.jsxs)(s.p,{children:["By default, the session driver is set to ",(0,a.jsx)(s.code,{children:"database"}),". This means that the session data is stored in the database, which provides a secure and reliable way to store session data."]}),"\n",(0,a.jsxs)(s.p,{children:["The session ",(0,a.jsx)(s.code,{children:"driver"})," configuration option defines where the session data is stored. The available options are:"]}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"database"}),": Stores session data in the database."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"cookie"}),": Stores session data in a cookie."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"file"}),": Stores session data in a file  ",(0,a.jsx)(s.strong,{children:"store/framework/sessions"}),"."]}),"\n"]}),"\n",(0,a.jsx)(s.h2,{id:"driver-requirements",children:"Driver requirements"}),"\n",(0,a.jsx)(s.h3,{id:"database",children:"Database"}),"\n",(0,a.jsxs)(s.p,{children:["The database driver requires a database connection to be configured in the ",(0,a.jsx)(s.code,{children:"config/database.php"})," file. The database connection is used to store the session data in the database. Pocketframe comes with a ",(0,a.jsx)(s.code,{children:"sessions"})," table schema that is used to store the session data and once you run ",(0,a.jsx)(s.code,{children:"php pocket schema apply"})," the table will be created. If you have a existing project you can run a command to create a schema table"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-bash",children:"php pocket schema:session-table\n"})}),"\n",(0,a.jsxs)(s.p,{children:["This will create a ",(0,a.jsx)(s.code,{children:"sessions"})," schema script in the ",(0,a.jsx)(s.code,{children:"database/schemas"})," directory."]}),"\n",(0,a.jsx)(s.p,{children:"Then apply the schema by running"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-bash",children:"php pocket schema apply\n"})}),"\n",(0,a.jsx)(s.h3,{id:"cookie",children:"Cookie"}),"\n",(0,a.jsxs)(s.p,{children:["The cookie driver stores session data in a cookie. This is the simplest way to store session data, but it is not recommended for production use. Pocketframe comes with a ",(0,a.jsx)(s.code,{children:"cookie"})," driver that is used to store the session data in a cookie. You can use the ",(0,a.jsx)(s.code,{children:"Session"})," mask to store and retrieve session data."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",children:"Session::put('key', 'value');\n"})}),"\n",(0,a.jsxs)(s.admonition,{type:"info",children:[(0,a.jsxs)(s.p,{children:["You can also use the ",(0,a.jsx)(s.code,{children:"session()"})," helper function to store and retrieve session data."]}),(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",children:"session(['key' => 'value']);\n"})})]}),"\n",(0,a.jsx)(s.h3,{id:"file",children:"File"}),"\n",(0,a.jsxs)(s.p,{children:["The file driver stores session data in a file. This is the simplest way to store session data, but it is not recommended for production use. Pocketframe comes with a ",(0,a.jsx)(s.code,{children:"file"})," driver that is used to store the session data in a file. You can use the ",(0,a.jsx)(s.code,{children:"Session"})," mask to store and retrieve session data."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",children:"Session::put('key', 'value');\n"})}),"\n",(0,a.jsxs)(s.admonition,{type:"info",children:[(0,a.jsxs)(s.p,{children:["You can also use the ",(0,a.jsx)(s.code,{children:"session()"})," helper function to store and retrieve session data."]}),(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",children:"session(['key' => 'value']);\n"})})]}),"\n",(0,a.jsx)(s.h2,{id:"working-with-sessions",children:"Working with sessions"}),"\n",(0,a.jsx)(s.h4,{id:"starting-the-session",children:"Starting the session"}),"\n",(0,a.jsxs)(s.p,{children:["You can start the session by calling the ",(0,a.jsx)(s.code,{children:"Session::start()"})," method. This will manually start the session."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",children:"Session::start();\n"})}),"\n",(0,a.jsx)(s.h4,{id:"checking-if-the-session-is-started",children:"Checking if the session is started"}),"\n",(0,a.jsxs)(s.p,{children:["You can check if the session is started by calling the ",(0,a.jsx)(s.code,{children:"Session::isStarted()"})," method."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",metastring:"showLineNumbers",children:"if (Session::isStarted()) {\n    // The session is started\n}\n\n// Example: if (Session::isStarted()) {\n//     // The session is started\n// }\n"})}),"\n",(0,a.jsx)(s.h4,{id:"getting-session-id",children:"Getting session ID"}),"\n",(0,a.jsxs)(s.p,{children:["You can get the session ID by calling the ",(0,a.jsx)(s.code,{children:"Session::id()"})," method. This will return the session ID and will help you to debug and track the session."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",metastring:"showLineNumbers",children:"$sessionId = Session::id();\n\n// Example: $sessionId = Session::id();\n// $sessionId will be '1234567890'\n"})}),"\n",(0,a.jsx)(s.h4,{id:"get-all-session-data",children:"Get all session data"}),"\n",(0,a.jsxs)(s.p,{children:["You can get all session data by calling the ",(0,a.jsx)(s.code,{children:"Session::all()"})," method. This will return an array of all session data."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",metastring:"showLineNumbers",children:"$sessionData = Session::all();\n\n// Example: $sessionData = Session::all();\n// $sessionData will be ['name' => 'John', 'age' => 30]\n"})}),"\n",(0,a.jsx)(s.h4,{id:"session-exists",children:"Session Exists"}),"\n",(0,a.jsxs)(s.p,{children:["You can check if a session key exists by calling the ",(0,a.jsx)(s.code,{children:"Session::exists($key)"})," method. This will return true if the session key exists."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",metastring:"showLineNumbers",children:"if (Session::exists('key')) {\n    // The session key exists\n}\n\n"})}),"\n",(0,a.jsx)(s.h4,{id:"session-has-key",children:"Session has key"}),"\n",(0,a.jsxs)(s.p,{children:["You can check if a session key exists by calling the ",(0,a.jsx)(s.code,{children:"Session::has($key)"})," method. This will return true if the session key exists."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",metastring:"showLineNumbers",children:"if (Session::has('key')) {\n    // The session key exists\n}\n"})}),"\n",(0,a.jsx)(s.h4,{id:"session-get",children:"Session get"}),"\n",(0,a.jsxs)(s.p,{children:["You can get a session key by calling the ",(0,a.jsx)(s.code,{children:"Session::get($key)"})," method. This will return the value of the session key."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",metastring:"showLineNumbers",children:"$sessionData = Session::get('key');\n\n// Example: $sessionData = Session::get('name');\n// $sessionData will be 'John'\n"})}),"\n",(0,a.jsx)(s.h4,{id:"session-put",children:"Session put"}),"\n",(0,a.jsxs)(s.p,{children:["You can store session data using the ",(0,a.jsx)(s.code,{children:"Session::put($key, $value)"})," method."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",metastring:"showLineNumbers",children:"Session::put('key', 'value');\n\n// Example: Session::put('name', 'John');\n"})}),"\n",(0,a.jsx)(s.h4,{id:"session-put-all",children:"Session Put All"}),"\n",(0,a.jsxs)(s.p,{children:["You can store session data using the ",(0,a.jsx)(s.code,{children:"Session::putAll($data)"})," method."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",metastring:"showLineNumbers",children:"Session::putAll(['key' => 'value']);\n\n// Example: Session::putAll(['name' => 'John', 'age' => 30]);\n// $sessionData will be ['name' => 'John', 'age' => 30]\n"})}),"\n",(0,a.jsx)(s.h4,{id:"session-remove",children:"Session Remove"}),"\n",(0,a.jsxs)(s.p,{children:["You can remove a session key by calling the ",(0,a.jsx)(s.code,{children:"Session::remove($key)"})," method. This will remove the session key from the session."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",metastring:"showLineNumbers",children:"Session::remove('key');\n\n// Example: Session::remove('name');\n// $sessionData will be ['age' => 30]\n"})}),"\n",(0,a.jsx)(s.h4,{id:"session-flush",children:"Session flush"}),"\n",(0,a.jsxs)(s.p,{children:["You can remove all session data by calling the ",(0,a.jsx)(s.code,{children:"Session::flush()"})," method. This will remove all session data from the session."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",metastring:"showLineNumbers",children:"Session::flush();\n\n// Example: Session::flush();\n// $sessionData will be []\n"})}),"\n",(0,a.jsx)(s.h4,{id:"session-destroy",children:"Session destroy"}),"\n",(0,a.jsxs)(s.p,{children:["You can destroy the session by calling the ",(0,a.jsx)(s.code,{children:"Session::destroy()"})," method. This will destroy the session and remove all session data."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",metastring:"showLineNumbers",children:"Session::destroy();\n\n// Example: Session::destroy();\n// $sessionData will be []\n"})}),"\n",(0,a.jsx)(s.h4,{id:"session-flash",children:"Session flash"}),"\n",(0,a.jsxs)(s.p,{children:["You can store session data that will only be available for the next request by calling the ",(0,a.jsx)(s.code,{children:"Session::flash($key, $value)"})," method. This will store the session data in the session and make it available for the next request."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",metastring:"showLineNumbers",children:"Session::flash('key', 'value');\n"})}),"\n",(0,a.jsx)(s.p,{children:"You can also use a helper function to store session data that will only be available for the next request."}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",metastring:"showLineNumbers",children:"flash('key', 'value');\n"})}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.strong,{children:"Example"})}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",metastring:"showLineNumbers",children:"public function store(Request $request): Response\n{\n  $category = new Category([\n    'category_name' => $request->post('category_name'),\n    'slug'          => StringUtils::slugify($request->post('category_name')),\n  ]);\n\n  $category->save();\n\n  // Store a flash message\n  flash('success', 'Category created successfully');\n\n  return Response::redirect(route('admin.categories.index'));\n}\n"})}),"\n",(0,a.jsx)(s.h4,{id:"session-hasflash",children:"Session hasFlash"}),"\n",(0,a.jsxs)(s.p,{children:["You can check if session data is available for the next request by calling the ",(0,a.jsx)(s.code,{children:"Session::hasFlash($key)"})," method. This will return true if the session data is available for the next request."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",metastring:"showLineNumbers",children:"if (Session::hasFlash('key')) {\n    // The session data is available for the next request\n}\n\n// Example: if (Session::hasFlash('name')) {\n//     // The session data is available for the next request\n// }\n"})}),"\n",(0,a.jsx)(s.p,{children:"You can also use a helper function to check if session data is available for the next request."}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",metastring:"showLineNumbers",children:"if (has_flash('key')) {\n    // The session data is available for the next request\n}\n\n"})}),"\n",(0,a.jsx)(s.h4,{id:"session-getflash",children:"Session getFlash"}),"\n",(0,a.jsxs)(s.p,{children:["You can get session data that will only be available for the next request by calling the ",(0,a.jsx)(s.code,{children:"Session::getFlash($key)"})," method. This will return the session data that will only be available for the next request."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",metastring:"showLineNumbers",children:"$sessionData = Session::getFlash('key');\n\n// Example: $sessionData = Session::getFlash('name');\n// $sessionData will be 'John'\n"})}),"\n",(0,a.jsx)(s.p,{children:"You can also use a helper function to get session data that will only be available for the next request."}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",metastring:"showLineNumbers",children:"$sessionData = get_flash('key');\n\n// Example: $sessionData = get_flash('name');\n// $sessionData will be 'John'\n"})}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.strong,{children:"Example"})}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-html",metastring:"showLineNumbers",children:'<div>\n  @if(has_flash(\'success\'))\n  <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded" role="alert">\n    <span class="block sm:inline">{{ get_flash(\'success\') }}</span>\n  </div>\n  @endif\n</div>\n'})}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.strong,{children:"Full Usage Example"})}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",metastring:"showLineNumbers",children:"// CategoriesController.php\n\npublic function store(Request $request): Response\n{\n  $category = new Category([\n    'category_name' => $request->post('category_name'),\n    'slug'          => StringUtils::slugify($request->post('category_name')),\n  ]);\n  $category->save();\n\n  // Store a flash message\n  flash('success', 'Category created successfully');\n\n  return Response::redirect(route('admin.categories.index'));\n}\n"})}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-html",metastring:"showLineNumbers",children:'\x3c!-- categories/index.view.php --\x3e\n\n<div>\n  @if(has_flash(\'success\'))\n  <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded" role="alert">\n    <span class="block sm:inline">{{ get_flash(\'success\') }}</span>\n  </div>\n  @endif\n</div>\n'})}),"\n",(0,a.jsx)(s.h4,{id:"session-old",children:"Session old"}),"\n",(0,a.jsxs)(s.p,{children:["You can get session data that will only be available for the next request by calling the ",(0,a.jsx)(s.code,{children:"Session::old($key)"})," method. This will return the session data that will only be available for the next request."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",metastring:"showLineNumbers",children:"$sessionData = Session::old('key');\n\n// Example: $sessionData = Session::old('name');\n// $sessionData will be 'John'\n"})}),"\n",(0,a.jsx)(s.p,{children:"You can also use a helper function to get session data that will only be available for the next request."}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",metastring:"showLineNumbers",children:"$sessionData = old('key');\n\n// Example: $sessionData = old('name');\n// $sessionData will be 'John'\n"})}),"\n",(0,a.jsx)(s.h4,{id:"session-expire",children:"Session Expire"}),"\n",(0,a.jsxs)(s.p,{children:["You can expire the session by calling the ",(0,a.jsx)(s.code,{children:"Session::expire()"})," method. This will expire the session and remove all session data."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",metastring:"showLineNumbers",children:"Session::expire();\n\n// Example: Session::expire();\n// $sessionData will be []\n"})}),"\n",(0,a.jsx)(s.h4,{id:"session-sweep",children:"Session sweep"}),"\n",(0,a.jsxs)(s.p,{children:["You can sweep the session by calling the ",(0,a.jsx)(s.code,{children:"Session::sweep()"})," method. This will sweep the session and remove all session data."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-php",metastring:"showLineNumbers",children:"Session::sweep();\n\n// Example: Session::sweep();\n// $sessionData will be []\n"})}),"\n",(0,a.jsx)(s.p,{children:"The session class is a comprehensive tool for managing session data in Pocketframe. It provides a simple and easy-to-use interface for storing and retrieving session data. It also provides a number of methods for managing session data, such as starting, stopping, and destroying the session."})]})}function c(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>t,x:()=>l});var i=n(6540);const a={},o=i.createContext(a);function t(e){const s=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:t(e.components),i.createElement(o.Provider,{value:s},e.children)}}}]);